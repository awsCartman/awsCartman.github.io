# Проектирование и разработка баз данных

## Выберем предметную область и создадим модель Чена

#### Предметная область : Конькобежый спорт.

#### Создадим БД для учёта проведённых соревнований, спортсменов и их результатах.

#### Для создания модели воспользуемся сайтом https://lucid.app.

#### Определяем сущности

Соревнование, спортсмен и забег(результат спортсмена)



То что у нас получилось:
![alt text](Screenshot_20250211_104712.png)



## Создание БД

#### Давайте зайдём на сервер, создадим контейнер с PostgreSQL.

#### Подключаемся к серверу
![alt text](image-2.png)

#### Создаём lxc контейнер с названием postgrelab
![alt text](image-3.png)

#### Выбираем дистрибутив, версию и архитектуру
![alt text](image-4.png)

#### Стартуем контейнер, подключаемся к терминалу и устанавливаем postgresql
![alt text](image-5.png)

#### Проверяем как прошла установка и смотрим ip, который нам выдали в пределах lxc-brigde
![alt text](image-6.png)

#### Создадим БД, пользователя для работы с БД и наделим его правами
![alt text](image-7.png)

#### Меняем сетевую конфигурацию контейнера на физ интерфейс сервера
![alt text](image-8.png)

Файл конфигурации контейнера находится по пути /var/lib/lxc/"container name"/config

Проверяем сеть на контейнере: 
![alt text](image-9.png)

Всё чотка

#### Осталось настроить БД для подкючения к ней извне
Меняем параметр listen_addresses на '*' в конфиге, находящемуся в: /etc/postgresql/15/main/postgresql.conf

Лучше ещё сделать вот это, чтобы наверняка:
![alt text](image-10.png)

Дописываем свой хост
![alt text](image-11.png)

## Подключаемся к БД 

## Заполняем БД

Заполним БД через скриптик.
Так выглядит конфигурация подключения:
![alt text](image-1.png)

Чтобы было поинтересней возьмём реальные имена конькобежцев с сайта speedskating results. 
Ссылки прилагаю: 
1) https://speedskatingresults.com/index.php?p=4&e=22764&g=1&s=63526
2) https://speedskatingresults.com/index.php?p=4&e=22764&s=63526
3) https://speedskatingresults.com/index.php?p=4&e=22466&g=1&s=63526
4) https://speedskatingresults.com/index.php?p=4&e=22466&g=1&s=63526

Имена распологаются в теге a, что мы и укажем в парсере:
![alt text](image.png)



## Несколько запросов к БД

